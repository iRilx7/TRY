<!doctype html><meta charset="utf-8"><link rel="stylesheet" href="styles.css"><title>Admin</title>

<header class="nav"><div class="wrap container">
  <div class="brand"><div style="width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,#79ffe1,#a0b3ff)"></div>
  <strong style="margin-left:8px">NovelHub</strong></div>
  <nav class="links">
    <a href="index.html">Home</a>
    <a href="profile.html">Profile</a>
    <a href="admin.html">Admin</a>
    <a href="auth.html" id="authLink">Log in</a>
    <button id="logout" class="btn hidden">Log out</button>
  </nav>
</div></header>
<div class="toastbox" id="toasts" style="position:fixed;right:16px;bottom:16px"></div>
<script type="module">
import {{ sb }} from './js/supabaseClient.js';
const sess = (await sb.auth.getSession()).data.session;
if (sess?.user) {{ document.getElementById('authLink').classList.add('hidden'); document.getElementById('logout').classList.remove('hidden'); }}
document.getElementById('logout').onclick = async ()=>{{ await sb.auth.signOut(); location.href='auth.html'; }};
</script>

<main class="container">
  <div id="guard" class="card">Checking admin…</div>
  <div id="cms" class="hidden">
    <section class="card"><h3>Create / Edit Novel</h3>
      <input id="n_title" placeholder="Title"><input id="n_author" placeholder="Author">
      <textarea id="n_desc" rows="4" placeholder="Description"></textarea>
      <input id="n_cover_url" placeholder="Cover URL">
      <input type="file" id="cover"><button id="uploadCover" class="btn">Upload ➜ Fill URL</button>
      <div style="display:flex;gap:8px"><button id="saveNovel" class="btn primary">Save</button><button id="deleteNovel" class="btn">Delete</button></div>
      <input type="hidden" id="n_id">
    </section>
    <section class="card"><h3>Chapters</h3>
      <input id="c_num" type="number" min="1" placeholder="#">
      <input id="c_title" placeholder="Chapter title">
      <textarea id="c_content" rows="10" placeholder="<p>Content…</p>"></textarea>
      <div style="display:flex;gap:8px"><button id="suggestNum" class="btn">Suggest next #</button><button id="createChapter" class="btn">Create</button><button id="updateChapter" class="btn">Update</button><button id="deleteChapter" class="btn">Delete</button></div>
      <table style="width:100%;margin-top:8px"><tbody id="chapTable"></tbody></table>
    </section>
    <section class="card"><h3>Novels</h3><input id="nv_q" placeholder="Search"><button id="nv_search" class="btn">Search</button><ul id="nv_list" class="list"></ul></section>
  </div>
</main>
<script type="module" src="js/admin.js"></script>
<footer class='container' style='color:#9fb0c3;text-align:center;padding:20px'>© <span id='y'></span> NovelHub Ultra</footer><script>document.getElementById('y').textContent=new Date().getFullYear()</script>
