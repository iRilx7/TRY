<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>NovelHub â€” Admin</title>
  <link rel="stylesheet" href="styles.css"/>
  <script defer src="js/supabaseClient.js"></script>
  <script defer src="js/admin.js"></script>
</head>
<body>
  <header class="header">
    <div class="container nav">
      <div class="brand"><span class="logo"></span> NovelHub</div>
      <nav class="nav-right">
        <a class="btn ghost" href="index.html">Home</a>
        <a class="btn ghost" href="profile.html">Profile</a>
        <a class="btn" id="logoutBtn" href="#">Log out</a>
        <button id="themeToggle" class="toggle">ðŸŒ™</button>
      </nav>
    </div>
  </header>

  <main class="container split">
    <section class="card">
      <h3 class="panel-title">Create / Edit Novel</h3>
      <div class="form">
        <div class="form three">
          <div>
            <div class="label">Title</div>
            <input id="title" class="input" placeholder="Novel title">
          </div>
          <div>
            <div class="label">Author</div>
            <input id="author" class="input" placeholder="Author">
          </div>
          <div>
            <div class="label">Slug (auto)</div>
            <input id="slug" class="input" placeholder="auto-generated">
          </div>
        </div>

        <div class="form three">
          <div>
            <div class="label">Genre</div>
            <select id="genre" class="input">
              <option>General</option>
              <option>Fantasy</option>
              <option>Romance</option>
              <option>Action</option>
              <option>Comedy</option>
              <option>Horror</option>
              <option>Adventure</option>
              <option>Sciâ€‘Fi</option>
              <option>Drama</option>
            </select>
          </div>
          <div>
            <div class="label">Cover URL</div>
            <input id="cover_url" class="input" placeholder="or upload below">
          </div>
          <div>
            <div class="label">Description</div>
            <textarea id="description" placeholder="Short description (used on cards)"></textarea>
          </div>
        </div>

        <div class="form row">
          <div>
            <div class="label">Cover upload</div>
            <input type="file" id="coverFile" class="input" accept="image/*">
            <div class="help">Uploads to <b>covers/</b> bucket</div>
          </div>
          <div style="align-self:end;display:flex;gap:10px">
            <button id="uploadCoverBtn" class="btn">Upload â†’ Fill URL</button>
            <button id="saveNovelBtn" class="btn primary">Save Novel</button>
          </div>
        </div>

        <div>
          <div class="label">Preview</div>
          <div id="preview" class="card" style="min-height:140px"></div>
        </div>
      </div>
    </section>

    <section class="card">
      <h3 class="panel-title">Chapters for</h3>
      <div class="form">
        <div class="form three">
          <div>
            <div class="label">Novel slug</div>
            <input id="chap_novel_slug" class="input" placeholder="novel-slug">
          </div>
          <div>
            <div class="label">Chapter #</div>
            <input id="chapter_number" class="input" placeholder="1">
          </div>
          <div>
            <div class="label">Chapter title</div>
            <input id="chapter_title" class="input" placeholder="Chapter title">
          </div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button id="suggestBtn" class="btn">Suggest next #</button>
          <button id="createChapterBtn" class="btn success">Create</button>
          <button id="updateChapterBtn" class="btn">Update</button>
          <button id="deleteChapterBtn" class="btn danger">Delete</button>
          <button id="loadListBtn" class="btn ghost">Load chapters list</button>
        </div>

        <div>
          <div class="label">Content (HTML allowed)</div>
          <textarea id="chapter_content" style="min-height:260px"><p>Chapter contentâ€¦</p></textarea>
        </div>

        <table class="table" id="chaptersTable">
          <thead><tr><th>#</th><th>Title</th><th>Created</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="footer">Â© 2025 NovelHub Â· Admin</footer>

  <script>
    const body=document.body;const KEY='nh-theme';
    const set=(t)=>{t==='light'?body.classList.add('light'):body.classList.remove('light');localStorage.setItem(KEY,t)}
    set(localStorage.getItem(KEY)||'dark');
    document.getElementById('themeToggle').onclick=()=>set(body.classList.contains('light')?'dark':'light');
  </script>
</body>
</html>
